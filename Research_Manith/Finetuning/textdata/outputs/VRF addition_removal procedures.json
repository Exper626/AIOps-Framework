[{"prompt":"What are the steps to configure a VRF instance on a Cisco IOS device?","response":"To configure a VRF instance on Cisco IOS: 1. Enter global configuration mode. 2. Use 'vrf definition <name>' to create the VRF. 3. Assign a Route Distinguisher (RD) with 'rd <value>'. 4. Configure Route Targets (RT) for import/export using 'route-target [import/export] <value>'. 5. Assign interfaces to the VRF with 'interface <id>' followed by 'vrf forwarding <name>'. 6. Configure IP addresses and routing protocols as needed."},{"prompt":"How do you remove a VRF from a Juniper Junos device?","response":"To remove a VRF on Junos: 1. Enter configuration mode. 2. Delete the VRF instance with 'delete routing-instances <name>'. 3. Remove any interface assignments from the VRF using 'delete interfaces <interface> unit <unit> family inet address <ip> routing-instance <name>'. 4. Commit the changes with 'commit'."},{"prompt":"What precautions should be taken before removing a VRF in a production network?","response":"Before removing a VRF: 1. Verify all associated interfaces, routes, and connected devices. 2. Ensure no active traffic relies on the VRF. 3. Backup configurations. 4. Notify stakeholders of potential disruptions. 5. Check for dependencies like BGP sessions or static routes tied to the VRF."},{"prompt":"How do you verify VRF configuration on a Linux server using iproute2?","response":"Use 'ip vrf show' to list VRF instances. Check interface assignments with 'ip link show'. Verify routing tables with 'ip route show table <table_id>'. Use 'ip -n <vrf_name> route show' to view routes specific to the VRF."},{"prompt":"What is the impact of removing a VRF with active BGP sessions?","response":"Removing a VRF with active BGP sessions will terminate those sessions, causing route withdrawals and potential traffic blackholing. Ensure BGP peers are reconfigured or traffic is rerouted before removal."},{"prompt":"How do you add a VRF to an existing OSPF process on Cisco IOS?","response":"To add a VRF to OSPF: 1. Create the VRF using 'vrf definition <name>'. 2. Configure OSPF within the VRF using 'router ospf <process_id> vrf <name>'. 3. Assign interfaces to the VRF and enable OSPF on them. 4. Verify with 'show ip ospf neighbor vrf <name>'."},{"prompt":"What commands are used to delete a VRF on a Cisco ASA firewall?","response":"On Cisco ASA: 1. Remove interfaces assigned to the VRF with 'no interface <name> vrf <name>'. 2. Delete the VRF with 'no vrf <name>'. 3. Save the configuration with 'write memory'."},{"prompt":"How do you automate VRF addition/removal using Ansible?","response":"Use Ansible's network automation modules. For Cisco IOS, define tasks with 'ios_config' to add/remove VRFs. For Junos, use 'junos_config'. Include steps to assign interfaces and commit changes. Validate with 'check mode' before execution."},{"prompt":"What is the procedure to migrate routes from one VRF to another?","response":"1. Export routes from the source VRF using route-targets. 2. Import them into the destination VRF. 3. Update interface assignments to point to the new VRF. 4. Validate route propagation with 'show ip route vrf <name>'. 5. Remove the old VRF after verification."},{"prompt":"How do you handle overlapping IP addresses during VRF removal?","response":"Ensure overlapping subnets are not used elsewhere in the network. Use route filtering or NAT to resolve conflicts before removal. Verify with 'show ip route' and 'show vrf' commands."},{"prompt":"What are the key differences between VRF Lite and MPLS-based VRFs?","response":"VRF Lite operates without MPLS, using per-interface VRF assignments in pure IP networks. MPLS-based VRFs use label switching for traffic separation in service provider backbones. Configuration for VRF Lite is simpler but lacks scalability compared to MPLS."},{"prompt":"How do you troubleshoot a failed VRF addition on a router?","response":"Check for syntax errors in configuration. Verify sufficient system resources. Use 'show vrf' and 'show ip route' to validate. For BGP, check 'show ip bgp vpnv4 all' for route propagation. Review logs with 'show logging' for errors."},{"prompt":"What is the role of Route Distinguishers (RDs) in VRF configuration?","response":"RDs uniquely identify routes within a VRF by appending a prefix to standard IPv4 addresses, ensuring overlapping IP ranges in different VRFs remain distinct. They are essential for MP-BGP to differentiate routes."},{"prompt":"How do you remove a VRF without disrupting other routing instances?","response":"1. Isolate the VRF by removing external connections. 2. Drain active sessions using 'clear bgp' or 'shutdown' on interfaces. 3. Delete the VRF configuration and commit changes. 4. Monitor other VRFs for unintended impacts using 'show ip route'."},{"prompt":"What are the steps to configure VRF route leaking between two VRFs on Cisco IOS?","response":"1. Create route-maps to control route exchange. 2. Use 'address-family ipv4 vrf <source>' and 'import vrf <target> route-map <name>' under BGP. 3. Verify with 'show ip route vrf <source>' and 'show ip route vrf <target>'."},{"prompt":"How do you validate VRF connectivity after configuration?","response":"Use 'ping vrf <name> <ip>' and 'traceroute vrf <name> <ip>' for basic tests. Check BGP with 'show ip bgp vpnv4 all'. Validate interface status with 'show ip interface brief vrf <name>'."},{"prompt":"What are the best practices for naming VRF instances in large networks?","response":"Use descriptive names (e.g., 'CustomerA_VRF'), include location or department codes, and maintain a centralized naming policy. Avoid generic names like 'VRF1' to prevent confusion."},{"prompt":"How do you roll back a VRF configuration change?","response":"Restore a pre-change configuration backup using 'configure replace' on Cisco or 'load override' on Junos. Reassign interfaces and routes to the previous state. Validate with 'show vrf' and 'show ip route'."},{"prompt":"What security considerations are required when adding a VRF?","response":"Ensure proper access control lists (ACLs) are applied. Validate route-targets to prevent unintended route leaks. Use encryption for VRF-aware services. Regularly audit configurations for compliance."},{"prompt":"How do you add a VRF to a bridge domain in a Cisco ASR?","response":"1. Create the VRF with 'vrf definition <name>'. 2. Assign it to a bridge domain using 'bridge-domain <id>' and 'vrf <name>'. 3. Configure subinterfaces for VLANs. 4. Verify with 'show bridge-domain' and 'show vrf'."}]